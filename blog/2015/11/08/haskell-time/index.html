<!DOCTYPE html> <!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]--> <!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]--> <!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html manifest="cache.manifest" class="no-js" lang="en"><!--<![endif]--> <head> <meta charset="utf-8"> <title>UTCTime, UnixTime, POSIXTime, EpochTime, ZonedTime and ClockTime - A personal Blog</title> <meta name="author" content="Manuel"> <meta name="keywords" content="2015, haskell, listing, time"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="apple-touch-icon" href="/style/touch-icon.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/style/touch-icon.png"> <link rel="canonical" href="https://manuel-io.github.io/blog/2015/11/08/haskell-time"> <link rel="shortcut icon" type="image/png" href="/favicon.png"> <link href="/stylesheets/screen.css" media="all" rel="stylesheet" type="text/css"> <link href="/atom.xml" rel="alternate" title="A personal Blog" type="application/atom+xml"> <script src="/javascripts/libs/jquery-1.11.2.min.js" type="text/javascript"></script> <script src="/javascripts/blog.js" type="text/javascript"></script> <script type="text/javascript" src="/javascripts/mathjax/unpacked/MathJax.js?config=TeX-AMS_HTML"></script> <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "jax": ["input/TeX", "output/HTML-CSS"],
    styles: { ".MathJax_Display": { "text-align": "left" } },
    "tex2jax": {
      inlineMath: [ ['$', '$'], ["\\(", "\\)"] ],
      displayMath: [ ['$$', '$$'], ["\\[", "\\]"] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" },
      TagSide: "left"
    },
    "HTML-CSS": {
      availableFonts: ["TeX"],
      linebreaks: { automatic: true }
    }
  });
</script> </head> <body> <header class='site'><h1> <a href="/"> <p>A</p> <p> </p> <p>p</p> <p>e</p> <p>r</p> <p>s</p> <p>o</p> <p>n</p> <p>a</p> <p>l</p> <p> </p> <p>B</p> <p>l</p> <p>o</p> <p>g</p> </a> </h1> </header> <div style='clear:both;'></div> <nav><span><a href="/">Blog</a></span> <span><a href="/blog/photography">Photography</a></span> <span><a href="http://vkitchen.herokuapp.com" target="_blank">Kitchen</a></span> <span><a href="https://github.com/manuel-io" target="_blank">Github</a></span> <span><a href="https://de.wikipedia.org/wiki/Benutzer:Manuel_Bieling" target="_blank">Wikipedia</a></span> <span><a href="/blog/links">Links</a></span> <span><a href="/atom.xml">Feed</a></span> <span><a href="/blog/tags">Tags</a></span> <span><a href="/blog/archives">Archive</a></span> <span><a href="/blog/about">About</a></span> </nav> <article> <header class='post'> <h1 class="entry-title">UTCTime, UnixTime, POSIXTime, EpochTime, ZonedTime and ClockTime</h1> <p> <time class='entry-date' datetime='2015-11-08T13:00:22+01:00'><span class='date'>Nov, 2015-11-08 | </span> <span class='time'>Sun, 13:00 </span></time> </p> </header> <section><p>Let us discuss time formats in Haskell. There are several different names and data types. First let me show you that every data type has his own IO action:</p> <pre><code>time:      getCurrentTime :: IO UTCTime
unix-time: getUnixTime    :: IO UnixTime
time       getPOSIXTime   :: IO POSIXTime
unix:      epochTime      :: IO EpochTime
time:      getZonedTime   :: IO ZonedTime
old-time:  getClockTime   :: IO ClockTime
</code></pre> <p>I will not cover <code>ClockTime</code>, because it&rsquo;s part of a deprecated <a href="https://hackage.haskell.org/package/old-time">package</a>. Next we will start a <code>ghci</code> session to see what is the result of each function:</p> <h3><a href="https://hackage.haskell.org/package/unix-time">UnixTime</a>:</h3> <pre><code>λ: import Data.UnixTime 
λ: t &lt;- getUnixTime &gt;&gt;= return . show . utSeconds
λ: read t :: Int
   1446987464
</code></pre> <p>You can use <code>toEpochTime</code> and <code>toClockTime</code>.</p> <h3><a href="https://hackage.haskell.org/package/time">POSIXTime</a>:</h3> <pre><code>λ: import Data.Time.Clock.POSIX
λ: t &lt;- getPOSIXTime &gt;&gt;= return . show . round
λ: read t :: Int
   1446987600
</code></pre> <p>Also, <code>posixSecondsToUTCTime</code> is part of the Library.</p> <h3><a href="https://hackage.haskell.org/package/unix">EpochTime</a>:</h3> <pre><code>λ: import System.Posix.Time
λ: t &lt;- fmap show epochTime
λ: read t :: Int
   1446987733

λ: import Data.UnixTime 
λ: fmap fromEpochTime epochTime
   UnixTime {utSeconds = 1446988206, utMicroSeconds = 0}
</code></pre> <h3><a href="https://hackage.haskell.org/package/time">UTCTime</a>:</h3> <p>Last but not least let&rsquo;s take a look at the <code>time</code> package:</p> <pre><code>λ: import Data.Time.Clock
λ: getCurrentTime &gt;&gt;= return . show

   No instance for (Show UTCTime) …
</code></pre> <p>What is that? <code>getCurrentTime</code> has no visual representation aka can&rsquo;t be converted to a string. No, we have to import another package:</p> <pre><code>λ: import Data.Time.Clock
λ: import Data.Time.Format
λ: t &lt;- fmap show getCurrentTime
λ: read t :: UTCTime
   2015-11-08 13:28:23.095651 UTC
</code></pre> <p>Well, that is a formated time string, but is it possible to have a simple timestamp like above. Sure:</p> <pre><code> λ: import Data.Time.Clock
 λ: import Data.Time.Format
 λ: t &lt;- getCurrentTime &gt;&gt;= return . formatTime defaultTimeLocale "%s"
 λ: read t :: Int
    1446989906
</code></pre> <h3><a href="https://hackage.haskell.org/package/time">ZonedTime</a>:</h3> <p>All times we&rsquo;ve got are in UTC. The main advantage of the <code>time</code> package is it can handle timezones, too:</p> <pre><code>λ: import Data.Time.LocalTime 
λ: import Data.Time.Format 
λ: getZonedTime &gt;&gt;= return . formatTime defaultTimeLocale "%Y-%m-%d, %H:%M %Z"
   "2015-11-08, 15:00 CET"
</code></pre> <p>At last there is one question. How to convert a timestamp back to a formated string:</p> <pre><code>λ: import Data.Time.Clock
λ: import Data.Time.Clock.POSIX 
λ: import Data.Time.LocalTime 
λ: import Data.Time.Format 
λ: let s = read "1446991464" :: Int
λ: let t x = (posixSecondsToUTCTime . realToFrac) x
λ: utcToLocalZonedTime (t s) &gt;&gt;=
     return . formatTime defaultTimeLocale "%Y-%m-%d, %H:%M %Z"
   "2015-11-08, 15:04 CET"
</code></pre> </section> <div style='clear:both;'></div> <footer> <section class="meta"> <p> <span class="byline author vcard">Posted by <span class="fn">Manuel</span></span> </p> <p class='categories'> <a class='category' href='/blog/categories/2015/'>2015</a>, <a class='category' href='/blog/categories/haskell/'>haskell</a>, <a class='category' href='/blog/categories/listing/'>listing</a>, <a class='category' href='/blog/categories/time/'>time</a> </p> </section> <section class='pagination'> <table><tr> <th class='left'><p><a href="/blog/2015/11/05/filzlinge/" title="Previous Post: Filzlinge">&laquo; </a></p></th> <td class='left'><p><a href="/blog/2015/11/05/filzlinge/" title="Previous Post: Filzlinge">Filzlinge</a></p></td> <td class='right'><p><a href="/blog/2015/12/01/asia-bratnudeln/" title="Next Post: Asia Bratnudeln">Asia Bratnudeln</a></p></td> <th class='right'><p><a href="/blog/2015/12/01/asia-bratnudeln/" title="Next Post: Asia Bratnudeln"> &raquo;</a></p></th> </tr></table> </section> </footer> </article> <footer><section class='posts'> <ul> <li><a href="/blog/2019/06/18/burger-time/">1. Burger Time</a></li> <li><a href="/blog/2019/06/01/minicloud/">2. Minicloud</a></li> <li><a href="/blog/2019/05/05/fortsetzung/">3. Fortsetzung</a></li> <li><a href="/blog/2019/04/14/base2/">4. Base ∈ {2, 10}</a></li> <li><a href="/blog/2019/03/02/css-animation-101/">5. CSS Animation 101</a></li> </ul> </section> <section class='copyright'> <p> Copyright &copy; 2010-2019 | Manuel | <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> </p> </section> </footer> </body> </html>
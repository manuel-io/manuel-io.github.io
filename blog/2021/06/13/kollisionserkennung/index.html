<!DOCTYPE html> <!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]--> <!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]--> <!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html manifest="cache.manifest" class="no-js" lang="en"><!--<![endif]--> <head> <meta charset="utf-8"> <title>Kollisionserkennung - A personal Blog</title> <meta name="author" content="Manuel"> <meta name="keywords" content="2021, haskell, listing"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="apple-touch-icon" href="/style/touch-icon.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/style/touch-icon.png"> <link rel="canonical" href="https://manuel-io.github.io/blog/2021/06/13/kollisionserkennung"> <link rel="shortcut icon" type="image/png" href="/favicon.png"> <link href="/stylesheets/screen.css" media="all" rel="stylesheet" type="text/css"> <link href="/atom.xml" rel="alternate" title="A personal Blog" type="application/atom+xml"> <script src="/javascripts/libs/jquery-1.11.2.min.js" type="text/javascript"></script> <script src="/javascripts/blog.js" type="text/javascript"></script> <script type="text/javascript" src="/javascripts/mathjax/unpacked/MathJax.js?config=TeX-AMS_HTML"></script> <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "jax": ["input/TeX", "output/HTML-CSS"],
    styles: { ".MathJax_Display": { "text-align": "left" } },
    "tex2jax": {
      inlineMath: [ ['$', '$'], ["\\(", "\\)"] ],
      displayMath: [ ['$$', '$$'], ["\\[", "\\]"] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" },
      TagSide: "left"
    },
    "HTML-CSS": {
      availableFonts: ["TeX"],
      linebreaks: { automatic: true }
    }
  });
</script> </head> <body> <header class='site'><h1> <a href="/"> <p>A</p> <p> </p> <p>p</p> <p>e</p> <p>r</p> <p>s</p> <p>o</p> <p>n</p> <p>a</p> <p>l</p> <p> </p> <p>B</p> <p>l</p> <p>o</p> <p>g</p> </a> </h1> </header> <div style='clear:both;'></div> <nav><span><a href="/">Blog</a></span> <span><a href="/blog/photography">Photography</a></span> <span><a href="http://vkitchen.herokuapp.com" target="_blank">Kitchen</a></span> <span><a href="https://minicloud.zahlenpresse.de" target="_blank">Minicloud</a></span> <span><a href="https://github.com/manuel-io" target="_blank">Github</a></span> <span><a href="https://de.wikipedia.org/wiki/Benutzer:Manuel_Bieling" target="_blank">Wikipedia</a></span> <span><a href="/blog/links">Links</a></span> <span><a href="/atom.xml">Feed</a></span> <span><a href="/blog/tags">Tags</a></span> <span><a href="/blog/archives">Archive</a></span> <span><a href="/blog/about">About</a></span> </nav> <article> <header class='post'> <h1 class="entry-title">Kollisionserkennung</h1> <p> <time class='entry-date' datetime='2021-06-13T07:25:45+02:00'><span class='date'>Jun, 2021-06-13 | </span> <span class='time'>Sun, 07:25 </span></time> </p> </header> <section><p>Kleine Finger√ºbung im Sachen Kollisionserkennung. Es gibt im Internet auch noch andere <a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Haskell">Beispiele</a>.</p> <div style="display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center;width:100%;"> <div style="flex-shrink:0;flex-grow:0;width:233px;"><img style="width:100%;" src="/data/images/rectangle.gif" title="Rectangle"></div> <div style="flex-shrink:0;flex-grow:0;width:233px;"><img style="width:100%;" src="/data/images/circle.gif" title="Circle"></div> <div style="flex-shrink:0;flex-grow:0;width:233px;"><img style="width:100%;" src="/data/images/polygon.gif" title="Polygon"></div> </div> <p>&hellip;</p> <pre><code>data Point = Point Float Float deriving (Show, Eq)
data Shape = Circle Point Float
           | Rectangle Point Point
           | Polygon [Point] deriving (Show, Eq)
</code></pre> <p>&hellip;</p> <pre><code>intersects :: Point -&gt; Shape -&gt; Bool
intersects (Point u v) (Rectangle (Point x1 y1) (Point x2 y2))
  | ((u &gt;= x1) &amp;&amp; (u &lt;= x2) &amp;&amp; (v &gt;= y1) &amp;&amp; (v &lt;= y2)) = True
  | otherwise = False
intersects (Point u v) (Circle (Point x y) radius)
  | ((u - x) ^ 2 + (v - y) ^ 2) &lt;= radius ^ 2 = True
  | otherwise = False
-- Ray casting algorithm
intersects (Point u v) (Polygon polygon)
  | (Point u v) `intersects` bounds = (odd . fst) (raycasting 0 (offset bounds) (Point u v) (Polygon polygon))
  | otherwise = False
  where
    offset (Rectangle (Point x1 _) (Point _ _)) = x1
    bounds = boundary (Polygon polygon)
    raycasting :: Int -&gt; Float -&gt; Point -&gt; Shape -&gt; (Int, Shape)
    raycasting acc o (Point u v) (Polygon (point:[])) = (acc, (Polygon (point:[])))
    raycasting acc o (Point u v) (Polygon ((Point x1 y1):(Point x2 y2):polygon))
      | (t &gt;= 0) &amp;&amp; (t &lt;= 1) &amp;&amp; (s &gt;= 0) &amp;&amp; (s &lt;= 1) = raycasting (acc + 1) o (Point u v) (Polygon ((Point x2 y2):polygon))
      | otherwise = raycasting (acc + 0) o (Point u v) (Polygon ((Point x2 y2):polygon))
      where
        t = (v - y1) / (y2 - y1)
        s = ((x1 - o) / (u - o)) + (t / (u - o)) * (x2 - x1)
</code></pre> <p><a href="https://git.io/JZ59q">Gist</a></p> </section> <div style='clear:both;'></div> <footer> <section class="meta"> <p> <span class="byline author vcard">Posted by <span class="fn">Manuel</span></span> </p> <p class='categories'> <a class='category' href='/blog/categories/2021/'>2021</a>, <a class='category' href='/blog/categories/haskell/'>haskell</a>, <a class='category' href='/blog/categories/listing/'>listing</a> </p> </section> <section class='pagination'> <table><tr> <th class='left'><p><a href="/blog/2021/06/09/sausages/" title="Previous Post: Sausages">&laquo; </a></p></th> <td class='left'><p><a href="/blog/2021/06/09/sausages/" title="Previous Post: Sausages">Sausages</a></p></td> <td class='right'></td> <th class='right'></th> </tr></table> </section> </footer> </article> <footer><section class='posts'> <ul> <li><a href="/blog/2021/06/13/kollisionserkennung/">1. Kollisionserkennung</a></li> <li><a href="/blog/2021/06/09/sausages/">2. Sausages</a></li> <li><a href="/blog/2021/03/20/kurz-mal-etwas-anderes/">3. Themenwechsel</a></li> <li><a href="/blog/2021/01/30/fortsetzung/">4. Fortsetzung (I)</a></li> <li><a href="/blog/2021/01/23/a-2-dimensional-data-structure/">5. A two dimensional data structure</a></li> </ul> </section> <section class='copyright'> <p> Copyright &copy; 2010-2021 | Manuel | <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> </p> </section> </footer> </body> </html>
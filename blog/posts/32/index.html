<!DOCTYPE html> <!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]--> <!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]--> <!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html manifest="cache.manifest" class="no-js" lang="en"><!--<![endif]--> <head> <meta charset="utf-8"> <title>A personal Blog</title> <meta name="author" content="Manuel"> <meta name="keywords" content="blog, personal, coding, foot, math, physics, life"> <meta name="description" content="This is a personal Blog about my life"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="apple-touch-icon" href="/style/touch-icon.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/style/touch-icon.png"> <link rel="canonical" href="https://manuel-io.github.io/blog/posts/32"> <link rel="shortcut icon" type="image/png" href="/favicon.png"> <link href="/stylesheets/screen.css" media="all" rel="stylesheet" type="text/css"> <link href="/atom.xml" rel="alternate" title="A personal Blog" type="application/atom+xml"> <script src="/javascripts/libs/jquery-1.11.2.min.js" type="text/javascript"></script> <script src="/javascripts/blog.js" type="text/javascript"></script> <script type="text/javascript" src="/javascripts/mathjax/unpacked/MathJax.js?config=TeX-AMS_HTML"></script> <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "jax": ["input/TeX", "output/HTML-CSS"],
    styles: { ".MathJax_Display": { "text-align": "left" } },
    "tex2jax": {
      inlineMath: [ ['$', '$'], ["\\(", "\\)"] ],
      displayMath: [ ['$$', '$$'], ["\\[", "\\]"] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" },
      TagSide: "left"
    },
    "HTML-CSS": {
      availableFonts: ["TeX"],
      linebreaks: { automatic: true }
    }
  });
</script> </head> <body> <header class='site'><h1> <a href="/"> <p>A</p> <p> </p> <p>p</p> <p>e</p> <p>r</p> <p>s</p> <p>o</p> <p>n</p> <p>a</p> <p>l</p> <p> </p> <p>B</p> <p>l</p> <p>o</p> <p>g</p> </a> </h1> </header> <div style='clear:both;'></div> <nav><span><a href="/">Blog</a></span> <span><a href="/blog/photography">Photography</a></span> <span><a href="http://vkitchen.herokuapp.com" target="_blank">Kitchen</a></span> <span><a href="https://minicloud.zahlenpresse.de" target="_blank">Minicloud</a></span> <span><a href="https://github.com/manuel-io" target="_blank">Github</a></span> <span><a href="https://de.wikipedia.org/wiki/Benutzer:Manuel_Bieling" target="_blank">Wikipedia</a></span> <span><a href="/blog/links">Links</a></span> <span><a href="/atom.xml">Feed</a></span> <span><a href="/blog/tags">Tags</a></span> <span><a href="/blog/archives">Archive</a></span> <span><a href="/blog/about">About</a></span> </nav> <div class="blog-index"> <article> <header class='post'> <h1 class="entry-title"><a href="/blog/2013/04/02/cram-md5/">CRAM-MD5</a></h1> <p> <time class='entry-date' datetime='2013-04-02T13:20:00+02:00'><span class='date'>Apr, 2013-04-02 | </span> <span class='time'>Tue, 13:20 CEST</span></time> </p> </header> <section><p>Zum Testen der Konfiguration eines Mailservers via <a href='https://de.wikipedia.org/wiki/Mail_Submission_Agent'>Submission</a>, kann <em>openssl</em> verwendet werden:</p> <pre><code>openssl s_client -starttls smtp -connect example.com:587
</code></pre> <p>Bietet der Server die Authentifizierung per <em>CRAM-MD5</em>-Challenge-Response an, kann eine Challenge mit dem <em>AUTH</em>-Befehl angefordert werden. Eine Base64-Dekodierung des empfangenen Strings gibt weitere Informationen.</p> <pre><code>AUTH CRAM-MD5
334 PDQ4Njg0NDM3NDAxNjc2NTguMTM2NDg0NzkxM0BleGFtcGxlLmNvbT4=
</code></pre> <p>Basierend auf der Challenge und dem gemeinsamen Geheimnis—dem Passwort—wird eine Prüfsumme gebildet und über das Netz gesendet:</p> <pre><code>MD5(('secret' XOR omask), MD5(('secret' XOR imask), challenge))
</code></pre> <p>Die Implementierung in <em>Ruby</em> sieht dann etwa so aus:</p> <pre><code>#!/usr/bin/env ruby
require 'base64'
require 'openssl'
require 'io/console'

IMASK = 0x36
OMASK = 0x5c
CRAM_BUFFERSIZE = 64

print 'Username: '
username = gets.chomp
print 'Password: '
secret = STDIN.noecho(&amp;:gets).chomp
print "\n" + 'Challenge: '
base64_challenge = gets.chomp

if base64_challenge =~ /^[a-zA-Z0-9\+\/\=]+$/
  challenge = Base64.decode64 base64_challenge
else raise ArgumentError, 'Challenge is not a valid base64 string.'
end

def cram_md5_response(secret, challenge)
  tmp = Digest::MD5.digest(cram_secret(secret, IMASK) + challenge)
  Digest::MD5.hexdigest(cram_secret(secret, OMASK) + tmp)
end

def cram_secret(secret, mask)
  secret = Digest::MD5.digest(secret) if secret.size &gt; CRAM_BUFFERSIZE
  buffer = secret.ljust CRAM_BUFFERSIZE, "\0"
  0.upto(buffer.size - 1) do |i|
    buffer[i] = (buffer[i].ord ^ mask).chr
  end
  buffer
end

digest = cram_md5_response secret, challenge 

puts 'Method: CRAM-MD5'
puts 'Username: ' + username
puts 'Challenge: ' + challenge
puts 'Response: ' + Base64.encode64("#{username} #{digest}")
</code></pre> </section> <div style='clear:both;'></div> </article> <article> <header class='post'> <h1 class="entry-title"><a href="/blog/2013/04/01/fail2ban/">Fail2ban</a></h1> <p> <time class='entry-date' datetime='2013-04-01T01:40:00+02:00'><span class='date'>Apr, 2013-04-01 | </span> <span class='time'>Mon, 01:40 CEST</span></time> </p> </header> <section><p><a href="http://www.fail2ban.org">Fail2ban</a> ist ein wirklich nützliches Tool, aber mit CentOS kein Vergnügen. Da gibt es verschiedene Probleme mit <a href="https://github.com/fail2ban/fail2ban/issues/44">Logrotate</a> und <a href="https://bugzilla.redhat.com/show_bug.cgi?id=697223">SELinux</a>.</p> <p>Es ist also wichtig das Verhalten von Fail2ban genau zu beobachten und die Konfiguration anzupassen. Als Beispiel dient hier CentOS 6.4 und SSH.</p> <p>Erstmal ist es wichtig die Fail2ban-Logdatei zu beobachten. Wird <em>logtarget = /var/log/fail2ban</em> in <em>/etc/fail2ban/fail2ban.local</em> gesetzt, muss auch <em>/etc/logrotate.d/fail2ban</em> angepasst werden.</p> <p>Den Status des <em>fail2ban-server</em> erfährt man mit den Befehlen:</p> <pre><code>service fail2ban status
/etc/init.d/fail2ban status
fail2ban-client status
</code></pre> <p>Die Regeln zum Filtern einer Logdatei können mit dem Befehl <em>fail2ban-regex</em> getestet werden:</p> <pre><code>fail2ban-regex /var/log/secure /etc/fail2ban/filter.d/sshd.conf
</code></pre> <p>Das Sperren von Internetadressen kann mit dem <em>logger</em>-Befehl getriggert werden. Wichtig ist zu verstehen, dass auch CGI/PHP Skripte Logdateien manipulieren können. Eigentlich können alle Programme in Logdateien schreiben. Per <em>/etc/rsyslog.conf</em> können Informationen auch verteilt und empfangen werden.</p> <pre><code>logger -p authpriv.warning -t 'sshd[123]' 'Invalid user admin from 10.2.11.1'
</code></pre> <p>Und</p> <pre><code>logger -p authpriv.warning -t 'sshd[123]' \
  'User root from 10.2.11.1 not allowed because not listed in AllowUsers'
</code></pre> <p>Etwas unübersichtlich ist <em>fail2ban-client -d</em>. Es wird die gesamte Konfiguration angezeigt. Interessant ist z.B. welcher Befehl zum Sperren einer IP-Adresse verwendet wird.</p> <p>Welche Adressen gerade gesperrt sind, sollte in der Logdatei von <em>fail2ban</em> stehen und mit <em>iptables -L</em> übereinstimmen.</p> <p>Gesperrte IP-Adressen wieder freigegeben:</p> <pre><code>iptables -D fail2ban-SSH -s 192.168.1.1 -j DROP
</code></pre> <p>Und dann gibt es noch die Manpages:</p> <ul> <li><a href="http://linux.die.net/man/1/fail2ban-client">fail2ban-client</a></li> <li><a href="http://linux.die.net/man/1/fail2ban-server">fail2ban-server</a></li> <li><a href="http://linux.die.net/man/1/fail2ban-regex">fail2ban-regex</a>.</li> </ul> <p>Nützliche Infos gibt es auch auf dieser <a href="http://lists.centos.org/pipermail/centos/2012-June/126860.html">Seite</a>.</p> </section> <div style='clear:both;'></div> </article> <article> <header class='post'> <h1 class="entry-title"><a href="/blog/2013/03/15/homoopathie/">Homöopathie</a></h1> <p> <time class='entry-date' datetime='2013-03-15T08:34:00+01:00'><span class='date'>Mar, 2013-03-15 | </span> <span class='time'>Fri, 08:34 CET</span></time> </p> </header> <section><p>Ich weigere mich mit dem Thema auseinander zu setzen. <em>Ich bin kein Befürworter</em> und <a href="https://twitter.com/holgi">mich nerven Menschen</a> die zu viel Energie in die Auseinandersetzung mit dem Thema aufbringen.</p> <p>Es ist sogar noch schlimmer: Ich akzeptiere die Meinung von anderen Menschen und versuche sie nicht umzustimmen. So war die stillschweigende Vereinbarung bisher.</p> <p>Es hat sich etwas geändert. Bei mit wurde vor ein paar Wochen eine schwere Krankheit festgestellt—eine von der Sorte für die es nicht so viele Arzneimittel gibt—und ich werde damit belästigt „es doch mal mit Homöopathie zu versuchen“</p> <p>Es gibt also Menschen, die versuchen mich umzustimmen, die versuchen mir ihre Meinung aufzudrücken, die zwingen mich mit dem Thema auseinander zu setzen. Und meine Reaktion ist, dass ich über Homöopathie schimpfen möchte, dass ich geneigt/bereit bin alle Gegenargumente zu nennen, wenn ich mich nicht halten kann. Um meine persönlich Meinung nochmal zu nennen möchte ich die <a href="https://de.wikipedia.org">Wikipedia</a> zitieren:</p> <blockquote><p> Bis heute existiert weder ein formaler, reproduzierbarer Nachweis noch eine akzeptable naturwissenschaftliche Begründung für eine Wirksamkeit homöopathischer Arzneimittel, die über den Placebo-Effekt hinausgeht. Die Homöopathie wird von Teilen der wissenschaftlichen Medizin auch als wirkungslose, in einigen Fällen sogar gefährliche Behandlung abgelehnt. </p><address>Wikipedia </address></blockquote> </section> <div style='clear:both;'></div> </article> <article> <header class='post'> <h1 class="entry-title"><a href="/blog/2013/03/08/weiter/">Weiter</a></h1> <p> <time class='entry-date' datetime='2013-03-08T22:59:00+01:00'><span class='date'>Mar, 2013-03-08 | </span> <span class='time'>Fri, 22:59 CET</span></time> </p> </header> <section><pre><code>insertionsort :: (Ord a) =&gt; [a] -&gt; [a]
insertionsort [] = []
insertionsort (x:xs) = insert x (insertionsort xs)
  where  
    insert x [] = [x]
    insert x (y:ys)
      | x &lt; y = x : y : ys
      | otherwise = y : (insert x ys)

bubblesort :: (Ord a) =&gt; [a] -&gt; [a]
bubblesort [] = []
bubblesort (x:xs) = (\(x,xs) -&gt; x : bubblesort xs) $ foldl f (x,[]) xs
  where f (x,acc) y = (min x y, max x y : acc)

mergesort :: (Ord a) =&gt; [a] -&gt; [a]
mergesort [] = []
mergesort [a] = [a]
mergesort xs = merge (mergesort xs1) (mergesort xs2)
  where
    (xs1,xs2) = split xs xs
      where
        split (x:xs) (_:_:zs) = (x:us,vs) where (us,vs) = split xs zs
        split xs _ = ([],xs)
    merge xs [] = xs
    merge [] ys = ys
    merge (x:xs) (y:ys)
      | x &lt; y = x : merge xs (y:ys)
      | otherwise = y : merge (x:xs) ys

quicksort :: (Ord a) =&gt; [a] -&gt; [a]
quicksort [] = []
quicksort (x:xs) = smaller ++ [x] ++ bigger
  where
    smaller = quicksort [a | a &lt;- xs, a &lt;= x]
    bigger = quicksort [a | a &lt;- xs, a &gt; x]

main = do
  putStrLn("insertionsort: " ++ show (insertionsort list))
  putStrLn("bubblesort: " ++ show (bubblesort list))
  putStrLn("mergesort: " ++ show (mergesort list))
  putStrLn("quicksort: " ++ show (quicksort list))
    where list = [2, 8, 6, 5, 1, 3, 9, 4, 7, 0]
</code></pre> </section> <div style='clear:both;'></div> </article> <div id="pagination"> <table><tr> <td class='next'><a class="next" href="/blog/posts/33">Older</a></td> <td class='arch'><a class='arch' href="/blog/archives">Archives</a></td> <td class='prev'><a class="prev" href="/blog/posts/31">Newer</a></td> </tr></table> </div> </div> <footer><section class='posts'> <ul> <li><a href="/blog/2021/01/17/fortschritt-slash-ausblick-20-slash-21/">1. Fortschritt/Ausblick 20/21</a></li> <li><a href="/blog/2020/09/13/zahnradgetriebe/">2. Zahnradgetriebe</a></li> <li><a href="/blog/2020/09/06/getriebe-ubersetzung-1-96/">3. Getriebe-Übersetzung (1:96)</a></li> <li><a href="/blog/2020/07/21/verschworungstheologien/">4. Verschwörungstheologien</a></li> <li><a href="/blog/2020/06/06/einfach-nur-leer/">5. Einfach nur Leer</a></li> </ul> </section> <section class='copyright'> <p> Copyright &copy; 2010-2021 | Manuel | <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> </p> </section> </footer> </body> </html>
<!DOCTYPE html> <!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]--> <!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]--> <!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html manifest="cache.manifest" class="no-js" lang="en"><!--<![endif]--> <head> <meta charset="utf-8"> <title>A personal Blog</title> <meta name="author" content="Manuel"> <meta name="keywords" content="blog, personal, coding, foot, math, physics, life"> <meta name="description" content="This is a personal Blog about my life"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="apple-touch-icon" href="/style/touch-icon.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/style/touch-icon.png"> <link rel="canonical" href="https://manuel-io.github.io/blog/posts/14"> <link rel="shortcut icon" type="image/png" href="/favicon.png"> <link href="/stylesheets/screen.css" media="all" rel="stylesheet" type="text/css"> <link href="/atom.xml" rel="alternate" title="A personal Blog" type="application/atom+xml"> <script src="/javascripts/libs/jquery-1.11.2.min.js" type="text/javascript"></script> <script src="/javascripts/blog.js" type="text/javascript"></script> <script type="text/javascript" src="/javascripts/mathjax/unpacked/MathJax.js?config=TeX-AMS_HTML"></script> <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "jax": ["input/TeX", "output/HTML-CSS"],
    styles: { ".MathJax_Display": { "text-align": "left" } },
    "tex2jax": {
      inlineMath: [ ['$', '$'], ["\\(", "\\)"] ],
      displayMath: [ ['$$', '$$'], ["\\[", "\\]"] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" },
      TagSide: "left"
    },
    "HTML-CSS": {
      availableFonts: ["TeX"],
      linebreaks: { automatic: true }
    }
  });
</script> </head> <body> <header class='site'><h1> <a href="/"> <p>A</p> <p> </p> <p>p</p> <p>e</p> <p>r</p> <p>s</p> <p>o</p> <p>n</p> <p>a</p> <p>l</p> <p> </p> <p>B</p> <p>l</p> <p>o</p> <p>g</p> </a> </h1> </header> <div style='clear:both;'></div> <nav><span><a href="/">Blog</a></span> <span><a href="/blog/photography">Photography</a></span> <span><a href="http://vkitchen.herokuapp.com" target="_blank">Kitchen</a></span> <span><a href="https://github.com/manuel-io" target="_blank">Github</a></span> <span><a href="https://de.wikipedia.org/wiki/Benutzer:Manuel_Bieling" target="_blank">Wikipedia</a></span> <span><a href="/blog/links">Links</a></span> <span><a href="/atom.xml">Feed</a></span> <span><a href="/blog/tags">Tags</a></span> <span><a href="/blog/archives">Archive</a></span> <span><a href="/blog/about">About</a></span> </nav> <div class="blog-index"> <article> <header class='post'> <h1 class="entry-title"><a href="/blog/2015/09/20/dlna-slash-upnp-debugging/">DLNA/UPnP Debugging</a></h1> <p> <time class='entry-date' datetime='2015-09-20T19:00:30+02:00'><span class='date'>Sep, 2015-09-20 | </span> <span class='time'>Sun, 19:00 </span></time> </p> </header> <section><p>Die Tage habe ich einen Medien-Server (<a href="http://sourceforge.net/projects/minidlna/">miniDLNA</a>) aufgesetzt. Im Prinzip kein Problem. Nur die Firewall musste ich zusätzlich konfigurieren. Tcpdump und dieser <a href="http://www.upnp-hacks.org/upnp.html">Artikel</a> waren dabei hilfreich. Etwa:</p> <pre><code>sudo tcpdump -i wlan0 udp port 1900 -vv -X
</code></pre> <h3>Topografie</h3> <p>Server und Player befinden sich in einem Netzwerk <em>192.168.2.0/16</em>. Server (<em>192.168.2.102</em>), Player (<em>192.168.2.106</em>).</p> <h3>Discover</h3> <p>Zunächst sendet der Player (Client) ein UDP Paket an eine multicast Adresse: <code>192.168.2.106:39250 &gt; 239.255.255.250:1900</code>. Der Quellport ist beliebig, der Zielport ist <em>1900</em>.</p> <pre><code>M-SEARCH * HTTP/1.1
MX: 3
ST: ssdp:all
HOST: 239.255.255.250:1900
MAN: ssdp:discover
</code></pre> <p>Die Antwort von einem UPnP-Server geht von Port <em>1900</em> an Ursprungsadresse und Port <code>192.168.2.102:1900 &gt; 192.168.2.106:39250</code>:</p> <pre><code>HTTP/1.1 200 OK
CACHE-CONTROL: max-age=1210
DATE: Sun, 20 Sep 2015 17:04:12 GMT
ST: urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1
USN: uuid:4d696e69-444c-164e-9d41-f0def14a0058::urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1
EXT:
SERVER: 3.2.0-61-generic.DLNADOC/1.50 UPnP/1.0 MiniDLNA/1.1.2
LOCATION: http://192.168.2.102:8200/rootDesc.xml
Content-Length: 0
</code></pre> <p>Damit teilt der Server sein Vorhandensein mit und gibt weitere Informationen. Die URL in der Antwort (unter LOCATION) kann im Browser geöffnet werden:</p> <p><code>curl -I http://192.168.2.102:8200/rootDesc.xml</code>.</p> <pre><code>HTTP/1.1 200 OK
Content-Type: text/xml; charset="utf-8"
Connection: close
Content-Length: 2204
Server: 3.2.0-61-generic DLNADOC/1.50 UPnP/1.0 MiniDLNA/1.1.2
Date: Sun, 20 Sep 2015 17:48:56 GMT
EXT:
</code></pre> <p>Für mich bedeutet das zusätzliche Regeln in der Firewall für den Server:</p> <pre><code>-A INPUT -p tcp -m tcp -s 192.168.0.0/16 -m state --state NEW,ESTABLISHED --dport 8200 -j ACCEPT
-A OUTPUT -p tcp -d 192.168.0.0/16 -m state --state ESTABLISHED --sport 8200 -j ACCEPT

-A INPUT -p udp -s 192.168.0.0/16 -d 239.255.255.250 --dport 1900 -j ACCEPT
-A OUTPUT -p udp -s 192.168.0.0/16 -d 192.168.0.0/16 --sport 1900 -j ACCEPT
</code></pre> <p>Und für den Player (Client):</p> <pre><code>-A INPUT -p tcp -m tcp -s 192.168.0.0/16 -d 192.168.0.0/16 -m state --state ESTABLISHED --sport 8200 -j ACCEPT
-A OUTPUT -p tcp -s 192.168.0.0/16 -d 192.168.0.0/16 -m state --state NEW,ESTABLISHED --dport 8200 -j ACCEPT

-A INPUT -p udp -s 192.168.0.0/16 -d 192.168.0.0/16 --sport 1900 -j ACCEPT
-A OUTPUT -p udp -s 192.168.0.0/16 -d 239.255.255.250 --dport 1900 -j ACCEPT
</code></pre> <p>Dass müsste gehen. Es kann sein, dass der Server noch einige Fehlermeldungen wirft: <code>error: sendto(udp_notify=8, 192.168.2.102): Operation not permitted</code>. Dann hilft es die Firewallregeln des Players zusätzlich dem Server zu geben&ndash;der Server ist auch ein Client. Es müsste aber auch einfach so gehen.</p> </section> <div style='clear:both;'></div> </article> <article> <header class='post'> <h1 class="entry-title"><a href="/blog/2015/09/08/von-der-gebuhr-zum-beitrag/">Von der Gebühr zum Beitrag</a></h1> <p> <time class='entry-date' datetime='2015-09-08T20:43:28+02:00'><span class='date'>Sep, 2015-09-08 | </span> <span class='time'>Tue, 20:43 </span></time> </p> </header> <section><p>Just vor ein paar Tagen kündigte die ARD einen <a href="http://www.ard.de/home/intern/presse/pressearchiv/ARD_legt_Finanzplanung_fuer_2017_bis_2020_vor/2095304/index.html">Mehrbedarf in Milliardenhöhe</a> an. Gelegenheit um mal ein bisschen auszuholen:</p> <p>Nachdem ich meine erste eigene Wohnung bezogen hatte, war es nicht meine erste Idee sich als Beitragszahler bei der GEZ zu melden. Meine Devise war: „Unter dem Teppich bleiben“. Außerdem war ich Student und als Bafög-Empfänger betrachtete ich mich als befreit!</p> <p>Nun irgendwann beantragte ich kein Bafög mehr und die schöne Illusion war nicht mehr aufrecht zuhalten. Das machte mir auch ein Freund klar und bezeichnete mich kühn als „Schmarotzer“.</p> <p>Das war eine klare Ansage. Also füllte ich noch am selben Abend das Anmeldeformular aus und war fortan zahlender Teilnehmer. Wirklich glücklich war ich nicht, aber immerhin steckte hinter den Worten meines Freundes eine Idee: „Wenn alle ihren Beitrag leisten, wird es nicht so teurer“ und der Betrag von 5,76 - Euro pro Monat (für meinen Computer) schien auch im Rahmen meiner Möglichkeiten.</p> <p>Im Januar 2013 wurde dann aus der Gebühr ein Beitrag und es sollte eine Pauschale pro Wohnung von 17,98 - Euro im Monat bezahlt werden. Ich bezahlte jetzt also das Dreifache oder auch nicht in schlechten Monaten. Ich hätte meine beiden ausländischen Mitbewohner zur Kasse bitten können, aber das schien mir noch abwegiger wo ich doch selber nicht verstand welchen Vorteil ich jetzt hatte. Die beiden Mitbewohner hatten wirklich keinen Fernseher aus der Heimat mitgebracht und schauten auch nicht fern.</p> <p>Man könnte jetzt argumentieren, dass ich den Mitbewohnern einen wesentlichen Teil der Kultur vorenthalten habe. Das Qualitätsprogramm.</p> <p>Mit der Zeit hörte/sah ich auch einige Sendungen regelmäßig: Deutschlandfunk, DTM im Ersten, Bauerfeind bei 3sat, <a href="https://de.wikipedia.org/wiki/Roche_%26_B%C3%B6hmermann">Roche &amp; Böhmermann</a> auf ZDFkultur. Ich war jetzt nicht nur Teilnehmer, ich fühlte mich auch so.</p> <p>Habe ich schon geschrieben, dass die ARD einen Mehrbedarf angemeldet hat. Folgende Begründung:</p> <ul> <li>Seit 2009 hat es keine Erhöhung der Rundfunkgebühren gegeben.</li> <li>2015 wurde der Beitrag auf 17,50 Euro gesenkt.</li> <li>Preissteigerungen (z.B. für Gehälter, Strom und Programmkosten).</li> <li>Mehreinnahmen liegen auf Sperrkonten (1,59 Mrd. Euro in vier Jahren).</li> <li>Gute Programme kosten Geld.</li> <li>Weiterentwicklung von <a href="https://de.wikipedia.org/wiki/Digital_Audio_Broadcasting">DAB+</a> und DVB-T2.</li> <li>Digitalisierung der Archive.</li> </ul> <p>1) Genau genommen gibt es seit Ende 2012 keine Rundfunkgebühr mehr. Und da es deutliche Mehreinnahmen gibt, bin ich wohl nicht der Einzige gewesen für den es eine Verdreifachung gab.</p> <p>2) Von den Mehreinnahmen gingen <a href="http://www.stefan-niggemeier.de/blog/14683/die-nimmerklugen-die-handelsblatt-propaganda-gegen-ard-und-zdf/">304 Millionen Euro</a> nicht auf Sperrkonten.</p> <p>3) Benutzt jemand DAB+ oder ist das einfach ein Prestigeprojekt?</p> <p>4) Digitalisierung der Archive finde ich toll. Es bleibt dann aber die Frage, ob die Archive der Bevölkerung zugänglich gemacht werden? Schon länger gibt es von Einzelnen die Idee von der ARD produzierte Inhalte unter eine freie Lizenz zu stellen (<a href="http://de.creativecommons.org/">Creative Commons</a>).</p> <p>Seit Sommer 2009 werden Archivbestände depubliziert und seit September 2010 auch Berichte nach meist siebentägiger Frist. Also genau das Gegenteil.</p> <p>Ich befürchte jetzt keine Beitragserhöhung, sondern dass die Mehreinnahmen für die nächste Beitragsperiode komplett der ARD zur Verfügung gestellt werden und dass die generische Argumentation von heute komplett&ndash;für die übernächste Beitragsperiode&ndash;übernommen wird. Inklusive: „Seit 2009 gab es keine Beitragserhöhung“.</p> <p>Die Stimmung im Netz ist recht ausgeglichen&ndash;außer den üblichen Querulanten und dem Heise-Forum gibt es noch <a href="http://www.spiegel.de/kultur/tv/kommentar-zur-ard-mehr-einnahmen-durch-haushaltbeitrag-a-1050453.html">Spiegel Online</a> und <a href="http://www.kraftfuttermischwerk.de/blogg/jan-boehmermann-ueber-den-rundfunkbeitrag/">Jan Böhmermann</a>.</p> </section> <div style='clear:both;'></div> </article> <article> <header class='post'> <h1 class="entry-title"><a href="/blog/2015/08/02/wikipedia-projektneuheiten-feed/">Wikipedia: Projektneuheiten (Feed)</a></h1> <p> <time class='entry-date' datetime='2015-08-02T11:42:20+02:00'><span class='date'>Aug, 2015-08-02 | </span> <span class='time'>Sun, 11:42 </span></time> </p> </header> <section><p>Schon seit einiger Zeit kümmere ich mich um einen Feed für die Wikipedia: Projektneuheiten. Jetzt war mal wieder ein bisschen Pflege notwendig um das im Hintergrund laufende Skript stabiler zu machen. Ziel ist es u.a. das <a href="https://tools.wmflabs.org/projektneuheiten-feed/?type=rss">RSS</a> und <a href="https://tools.wmflabs.org/projektneuheiten-feed/?type=atom">Atom</a>-Format parallel anzubieten und genau das wird jetzt auch gemacht. Mit <code>?type=rss</code> und <code>?type=atom</code> kann das entsprechende Format ausgewählt werden. Fallback ist das neuere Atom-Format:</p> <pre><code>[...]
FORMAT = case WEB['type']
  when 'rss' then :rss
  when 'atom' then :atom
  else :atom
end
[...]
</code></pre> <p>Siehe den gesamten <a href="http://git.io/vOZ2l">Quelltext</a>.</p> </section> <div style='clear:both;'></div> </article> <article> <header class='post'> <h1 class="entry-title"><a href="/blog/2015/07/25/dnssec-and-tlsa/">DNSSEC &amp; TLSA (Lubuntu 14.04 LTS)</a></h1> <p> <time class='entry-date' datetime='2015-07-25T16:50:23+02:00'><span class='date'>Jul, 2015-07-25 | </span> <span class='time'>Sat, 16:50 </span></time> </p> </header> <section><img class="right" src="/data/images/dnssec.png" title="DNSSEC" alt="DNSSEC"> <p>First step is to disable <code>dnsmasq</code> which is an old version (2.68) and doesn&rsquo;t support DNSSEC well. Later versions do. In <code>/etc/NetworkManager/NetworkManager.conf</code> comment <code># dns=dnsmasq</code> and restart the NetworkManager <code>sudo initctl restart network-manager</code>.</p> <img class="right" src="/data/images/dane.png" title="DANE" alt="DANE"> <p>Install unbound and configure it properly. <a href="https://unbound.net/">Unbound</a> is a validating, recursive, and caching DNS server software product:</p> <pre><code>sudo apt-get install unbound
</code></pre> <p>See my <a href="https://gist.github.com/manuel-io/ec0de71980aba83838d3#file-unbound-conf">unbound.conf</a> or <code>man 5 unbound.conf</code>. Configure NM to use your local dns-server. If you then <code>dig com. SOA +dnssec</code> you should see the AD flag there:</p> <pre><code>$ dig @127.0.0.1 sys4.de +dnssec | egrep 'flags: ([a-z]{2}\s)*ad.*;'
;; flags: qr rd ra ad; QUERY: 1, ANSWER: 2, AUTHORITY: 3, ADDITIONAL: 3

$ ldns-dane verify posteo.de 443
89.146.220.134 dane-validated successfully
</code></pre> <p>At last see some failures:</p> <pre><code>$ dig @127.0.0.1 sigfail.verteiltesysteme.net | grep SERVFAIL
$ dig @127.0.0.1 servfail.sidnlabs.nl +dnssec | grep SERVFAIL
</code></pre> <p>Even a simple ping request should be impossible:</p> <pre><code>$ ping dnssec-failed.org
ping: unknown host dnssec-failed.org
</code></pre> <blockquote><p>info: validation failure &lt;dnssec-failed.org. A IN>: no keys have a DS with algorithm RSASHA1 from 68.87.85.132 for key dnssec-failed.org. while building chain of trust</p></blockquote> <ul> <li>Stats: <a href="http://stats.labs.apnic.net/dnssec/DE">Use of DNSSEC Validation for Germany</a></li> <li>Browser Add-On: <a href="https://www.dnssec-validator.cz/">DNSSEC/TLSA Validator</a>.</li> <li>Online-Tools: <a href="http://dnscheck.ripe.net/">DNSCheck</a>, <a href="http://dnssec.vs.uni-due.de/">University Duisburg-Essen</a>, <a href="https://dnssectest.sidnlabs.nl/">SIDN Labs</a>, <a href="http://dnssec-debugger.verisignlabs.com">VerisignLabs</a>.</li> <li>Tutorials: <a href="https://calomel.org/unbound_dns.html">Unbound DNS</a>.</li> </ul> </section> <div style='clear:both;'></div> </article> <div id="pagination"> <table><tr> <td class='next'><a class="next" href="/blog/posts/15">Older</a></td> <td class='arch'><a class='arch' href="/blog/archives">Archives</a></td> <td class='prev'><a class="prev" href="/blog/posts/13">Newer</a></td> </tr></table> </div> </div> <footer><section class='posts'> <ul> <li><a href="/blog/2019/06/01/minicloud/">1. Minicloud</a></li> <li><a href="/blog/2019/05/05/fortsetzung/">2. Fortsetzung</a></li> <li><a href="/blog/2019/04/14/base2/">3. Base ∈ {2, 10}</a></li> <li><a href="/blog/2019/03/02/css-animation-101/">4. CSS Animation 101</a></li> <li><a href="/blog/2019/02/03/driving-batteries-in-parallel/">5. Driving Batteries in Parallel</a></li> </ul> </section> <section class='copyright'> <p> Copyright &copy; 2010-2019 | Manuel | <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> </p> </section> </footer> </body> </html>